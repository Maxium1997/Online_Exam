{% load web_filters %}

<header class="header">
    <nav class="navbar navbar-expand-lg navbar-light navbar-laravel" color>
        <div class="container">
            <a class="navbar-brand" href="{% url "Homepage" %}"><i class="fa fa-book"></i>｜ALCPT</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    {% if request.user|has_perm:'SystemManager' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                SystemManager
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'user_list' %}">使用者列表</a>
                                <a class="dropdown-item" href="{% url 'unit_list' %}">單位列表</a>
                                <a class="dropdown-item" href="{% url 'report_category_list' %}">回報類別列表</a>
                                <a class="dropdown-item" href="{% url 'responsible_report_list' 'SystemManager' %}">問題回報列表</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if request.user|has_perm:'TestManager' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                TestManager
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'exam_list' %}">考試列表</a>
                                <a class="dropdown-item" href="{% url 'testpaper_list' %}">考卷列表</a>
                                <a class="dropdown-item" href="{% url 'testee_group_list' %}">受測者群組</a>
                                <a class="dropdown-item" href="{% url 'responsible_report_list' 'TestManager' %}">問題回報列表</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if request.user|has_perm:'TBManager' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                TBManager
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'tbmanager_question_list' %}">題目列表</a>
                                <a class="dropdown-item" href="{% url 'question_review' %}">審核試題</a>
                                <a class="dropdown-item" href="{% url 'responsible_report_list' 'TBManager' %}">問題回報列表</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if request.user|has_perm:'TBOperator' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                TBOperator
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'tboperator_question_list' %}">題目列表</a>
                                <a class="dropdown-item" href="{% url 'question_create' 'listening' %}">新增聽力試題</a>
                                <a class="dropdown-item" href="{% url 'question_create' 'reading' %}">新增閱讀試題</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if request.user|has_perm:'Viewer' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Viewer
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'exam_score_list' %}">考試成績列表</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if request.user|has_perm:'Testee' %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Testee
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'testee_exam_list' %}">測驗紀錄</a>
                                <a class="dropdown-item" href="{% url 'testee_score_list' %}">成績紀錄</a>
                                <a class="dropdown-item" href="{% url 'testee_practice_create' 'listening' %}">聽力練習</a>
                                <a class="dropdown-item" href="{% url 'testee_practice_create' 'reading' %}">閱讀練習</a>
                            </div>
                        </li>
                    {% endif %}

                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-user"></i>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'profile' %}">{{ request.user }}</a>
                                <a class="dropdown-item" href="{% url 'report' %}">問題回報</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                            </div>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Login</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
</header>