{% extends 'base.html' %}

{% load web_filters %}

{% block path %}

{% endblock %}

{% block content %}
    <div class="answering-page">
        <form action="{% url 'testee_answering' exam.id answer.id %}" method="post">
        <div class="title"><h1>Answering.</h1></div>
        {% csrf_token %}
            <table>
                <tr>
                    <td class="col-md-2" style="text-align: center">題目</td>
                    {% if answer.question.q_type|question_kind == 'listening' %}
                        <td style="text-align: left; vertical-align:middle;">
                            <audio controls preload="none">
                                <source src="{{ answer.question.q_file }}" type="audio/mpeg">
                                Your browser does not support the audio tag.
                            </audio>
                        </td>
                    {% elif answer.question.q_type|question_kind == 'reading' %}
                        <td style="vertical-align:middle; text-align: left">{{ answer.question }}</td>
                    {% else %}
                        <td style="vertical-align:middle; text-align: center">Unknown</td>
                    {% endif %}
                </tr>

                {% for option in answer.question.choice_set.all %}
                <tr>
                    <td class="col-md-2" style="text-align: center">{{ forloop.counter }}</td>
                    <td style="vertical-align:middle; text-align: left">
                        <input type="radio" name="answer_{{ answer.id }}" value="{{ forloop.counter }}" {% if forloop.counter == answer.selected %}checked{% endif %} required>{{ option }}
                    </td>
                </tr>
                {% endfor %}
            </table>



            <div class="btn">
                <button id="next" type="submit">下一題</button>
                <button id="leave" type="button" onclick="window.location.href='{% url 'Homepage' %}'">離開</button>
            </div>

        </form>

        <style>
            .answering-page .title h1{
                width: 30%;
                font-size: 28px;
                color: #FFFEF6;
                background-color: #4CCABD;
                padding-top: 10px;
                padding-bottom: 10px;
                padding-right: 15px;
                padding-left: 45px;
                text-align: center;
            }
            .answering-page table{
                position: relative;
                left: 20%;

                width: 70%;

                font-size: 20px;
            }
            .answering-page table td{
                padding: 4px;
            }

            .answering-page .btn #next{
                position: absolute;
                top: 88%;
                left: 80%;
            }
            .answering-page .btn #leave{
                position: absolute;
                top: 88%;
                left: 92%;
            }
        </style>
    </div>

    <div class="page">
        <table>
            <tr>
            {% for answer in answers %}
                <td>
                    {% if answer.selected != -1 %}
                        <div class="bit" style="color: red">{{ forloop.counter }}</div>
                    {% else %}
                        <div class="bit"><a href="{% url 'testee_answering' exam.id answer.id %}">{{ forloop.counter }}</a></div>
                    {% endif %}
                </td>
                {% if forloop.counter|divisibleby:10 %}
                    </tr><tr>
                {% endif %}
            {% endfor %}
        </table>

        <style>
            .page{
                position: absolute;
                bottom: 5%;

                font-size: 14px;
            }
            .page table td{
                text-align: center;
            }

            .page .bit{
                border-style: solid;
                border-width: 1px;
                border-radius: 2px;
                border-color: lightcyan;
                background-color: paleturquoise;

                margin: 2px;
                padding: 2px;
            }
            .page .bit a{
                color: #2a6496;
                text-decoration: none;
            }
            .page .bit a:active{
                color: black;
            }

        </style>
    </div>


{% endblock %}