{% extends 'base.html' %}

{% load staticfiles %}

{#{% block scripts %}#}
{#    <script type="text/javascript">#}
{#        var passName = false;#}
{#        var passTime = false;#}
{#        var passDuration = false;#}
{#        var passTestpaper = false;#}
{#        var passGroup = false;#}
{##}
{#        var submit = document.getElementById('submit');#}
{#        document.getElementById('submit').disabled = true;#}
{#        document.getElementById('submit').style.backgroundColor = 'grey';#}
{##}
{##}
{#        function data_unique(names , input) {#}
{#            var submit = document.getElementById('submit');#}
{#            var arr = names;#}
{##}
{#            for(var i = 0; i < arr.length; i++) {#}
{#                if (input.value === arr[i]) {#}
{#                    document.getElementById('invalid').innerHTML = "此名稱已存在。";#}
{#                    submit.style.backgroundColor = 'grey';#}
{#                    submit.disabled = true;#}
{#                    break;#}
{#                } else if (input.value === ""){#}
{#                    submit.style.backgroundColor = 'grey';#}
{#                    submit.disabled = true;#}
{#                } else {#}
{#                    document.getElementById('invalid').innerHTML = "";#}
{#                    submit.style.backgroundColor = '#4CCABD';#}
{#                    submit.disabled = false;#}
{#                }#}
{#            }#}
{#        }#}
{##}
        {#Checkout whether Select tag is not null.#}
{#        function Selected(selectedData, kind) {#}
{#            if (selectedData.value === ''){#}
{#                if(kind === 'Group'){#}
{#                    passGroup = false;#}
{#                } else {#}
{#                    passTestpaper = false;#}
{#                }#}
{#            }#}
{#            else {#}
{#                if(kind === 'Group'){#}
{#                    passGroup = true;#}
{#                } else{#}
{#                    passTestpaper = true;#}
{#                }#}
{#            }#}
{#        }#}
{##}
        {#Checkout whether all tag is valid and can send the form.#}
{#        function IsPass() {#}
{#            if(passName===true && passTime===true && passDuration===true && passTestpaper===true &&passGroup===true){#}
{#                submit.style.backgroundColor = '#4CCABD';#}
{#                submit.disabled = false;#}
{#            }#}
{#            else{#}
{#                submit.style.backgroundColor = 'grey';#}
{#                submit.disabled = true;#}
{#            }#}
{#        }#}
{##}
{#        document.getElementById('result').innerHTML = 'this is test';#}
{#    </script>#}
{#{% endblock %}#}


{% block path %}
    <a href="">考試管理員</a>
    <a class="fa fa-angle-double-right fa-lg box"></a>
    <a href="{% url 'exam_list' %}">考試列表</a>
    <a class="fa fa-angle-right fa-lg box"></a>
    <a href="">新增考試</a>
{% endblock %}

{% block content %}

    <label id="result">test</label>

    <div class="exam_create">
        <div class="title"><h1>Create Exam.</h1></div>
        <form method="post" class="form-horizontal" role="form">
            {% csrf_token %}
            <table>
                <tr>
                    <td>測驗名稱</td>
                    <td><input type="text" name="exam_name" required></td>
                </tr>

                <tr>
                    <td>開始時間</td>
                    <td>
                        <div class="input-group date form_datetime col-md-4" data-date="" data-date-format="yyyy-mm-ddThh:ii:ss" data-link-field="dtp_input1">
                            <input style="width: 550%" class="form-control" size="16" type="text" id="start_time" name="start_time" required>
                            <span style="position: relative; left: 200%" class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span style="position: relative; left: 200%" class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                        </div>
                        <input type="hidden" id="dtp_input1" value="" />
                    </td>
                </tr>

                <tr>
                    <td>測驗時間</td>
                    <td><input type="number" name="duration" value="40" required></td>
                </tr>

                <tr>
                    <td>測驗試卷</td>
                    <td>
                        <select name="selected_testpaper" id="selected_testpaper" onchange="Selected(document.getElementById('selected_testpaper'), 'testpaper')" required>
                            <option value="" disabled selected>請選擇測驗用試卷</option>
                            {% for testpaper in testpapers %}
                                <option value="{{ testpaper.id }}">{{ testpaper.name }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>測驗群組</td>
                    <td>
                        <select name="selected_group" id="selected_group" onchange="Selected(document.getElementById('selected_group'), 'group')" required>
                            <option value="" disabled selected>請選擇受測者群組</option>
                            {% for group in groups %}
                                <option value="{{ group.id }}">{{ group.name }}</option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
            </table>

            <div class="btn">
                <button type="submit" id="submit">送出</button>
                <button type="reset">重設</button>
                <button type="button" onclick="self.location=document.referrer;">取消</button>&nbsp;
            </div>
        </form>

        <style>
            .exam_create .title h1{
                width: 30%;
                font-size: 28px;
                color: #FFFEF6;
                background-color: #4CCABD;
                padding-top: 10px;
                padding-bottom: 10px;
                padding-right: 15px;
                padding-left: 45px;
                text-align: center;
            }
            .exam_create table{
                position: relative;
                left: 25%;

                width: 50%;

                font-size: 20px;
            }
            .exam_create table td{
                padding: 4px;
            }
            .exam_create form input{
                width: 100%;
                padding: 6px;
            }

            .exam_create .btn{
                position: relative;
                top: 30px;
                left: 38%;
            }
        </style>

        <link href="{% static '/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" media="screen">
        <link href="{% static '/bootstrap/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" media="screen">

        <script type="text/javascript" src="{% static '/bootstrap/js/jquery-1.8.3.min.js' %}" charset="UTF-8"></script>
{#        <script type="text/javascript" src="{% static '/bootstrap/js/bootstrap.min.js' %}"></script>#}
        <script type="text/javascript" src="{% static '/bootstrap/js/bootstrap-datetimepicker.js' %}" charset="UTF-8"></script>
        <script type="text/javascript" src="{% static '/bootstrap/js/bootstrap-datetimepicker.fr.js' %}" charset="UTF-8"></script>

        <script type="text/javascript">
            $('.form_datetime').datetimepicker({
                language:  'en',
                weekStart: 1,
                todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 2,
                forceParse: 0,
                showMeridian: 1
            });
        </script>
    </div>
{% endblock %}
